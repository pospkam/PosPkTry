@tailwind base;
@tailwind components;
@tailwind utilities;

/* Kamchatour Hub — дизайн-токены главного экрана */
@import './home-variables.css';

/* SAMSUNG WEATHER THEME - ДИНАМИЧЕСКАЯ ТЕМА */
@import './samsung-weather-theme.css';
@import './samsung-weather-dynamic.css';

/* =============================================
   DESIGN SYSTEM — CSS Variables
   Единый источник цветов, теней, радиусов.
   Тема управляется атрибутом data-theme на <html>.
   Дефолт: dark.
   ============================================= */

:root[data-theme="dark"] {
  --bg-primary: #0D1117;
  --bg-secondary: #161B22;
  --bg-card: #21262D;
  --bg-hover: #30363D;
  --text-primary: #F0F6FC;
  --text-secondary: #8B949E;
  --text-muted: #484F58;
  --accent: #00D4FF;
  --accent-hover: #00B8D9;
  --accent-muted: rgba(0,212,255,0.1);
  --success: #3FB950;
  --warning: #D29922;
  --danger: #F85149;
  --salmon: #E8734A;
  --border: rgba(255,255,255,0.08);
  --border-strong: rgba(255,255,255,0.16);
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
  --shadow-md: 0 4px 16px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-xl: 28px;
}

:root[data-theme="light"] {
  --bg-primary: #FFFFFF;
  --bg-secondary: #F6F8FA;
  --bg-card: #FFFFFF;
  --bg-hover: #F3F4F6;
  --text-primary: #1C2128;
  --text-secondary: #57606A;
  --text-muted: #8C959F;
  --accent: #0969DA;
  --accent-hover: #0550AE;
  --accent-muted: rgba(9,105,218,0.1);
  --success: #1A7F37;
  --warning: #9A6700;
  --danger: #CF222E;
  --salmon: #CF4E2A;
  --border: rgba(0,0,0,0.08);
  --border-strong: rgba(0,0,0,0.16);
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 16px rgba(0,0,0,0.1);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.12);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-xl: 28px;
}

/* Fallback: если data-theme ещё не установлен, применяем dark */
:root:not([data-theme]) {
  --bg-primary: #0D1117;
  --bg-secondary: #161B22;
  --bg-card: #21262D;
  --bg-hover: #30363D;
  --text-primary: #F0F6FC;
  --text-secondary: #8B949E;
  --text-muted: #484F58;
  --accent: #00D4FF;
  --accent-hover: #00B8D9;
  --accent-muted: rgba(0,212,255,0.1);
  --success: #3FB950;
  --warning: #D29922;
  --danger: #F85149;
  --salmon: #E8734A;
  --border: rgba(255,255,255,0.08);
  --border-strong: rgba(255,255,255,0.16);
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
  --shadow-md: 0 4px 16px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-xl: 28px;
}

/* ===== Анимации Home Screen ===== */

/* Staggered fade-in для карточек туров */
@keyframes khFadeInUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Glow-pulse для активных элементов */
@keyframes khGlowPulse {
  0%, 100% {
    box-shadow: 0 0 8px rgba(0, 212, 255, 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.6);
  }
}

:root {
  /* Ультрамарин цвета */
  --ultramarine: #120A8F;
  --ultramarine-light: #4169E1;
  --ultramarine-lighter: #6495ED;
  
  /* Samsung Weather colors */
  --premium-black: #0a0a0a;
  --premium-gold: #d4af37;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}

/* Скрываем scrollbar но оставляем функциональность */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Кастомный scrollbar для остальных элементов */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Анимация мерцания звёзд */
@keyframes twinkle {
  0%, 100% { 
    opacity: 0.3; 
    transform: scale(1);
  }
  50% { 
    opacity: 1; 
    transform: scale(1.2);
  }
}

.animate-twinkle {
  animation: twinkle 3s ease-in-out infinite;
}

/* Glassmorphism утилита */
.glass {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* ===== Weather Effects Animations ===== */
@keyframes fall {
  to {
    transform: translateY(110vh) translateX(50px);
    opacity: 0;
  }
}
.animate-fall {
  animation: fall linear infinite;
}

@keyframes rain {
  to {
    transform: translateY(110vh);
  }
}
.animate-rain {
  animation: rain linear infinite;
}

@keyframes wind {
  to {
    transform: translateX(110vw) translateY(-100px) rotate(360deg);
    opacity: 0;
  }
}
.animate-wind {
  animation: wind linear infinite;
}

@keyframes wave {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(-20px); }
}

@keyframes ping {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
}

.animate-wave {
  animation: wave 4s cubic-bezier(0.36, 0.45, 0.63, 0.53) infinite;
}

.animate-ping-custom {
  animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
}

/* ===== ModernTourSearch component styles ===== */
.modern-search-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 0 1rem;
}

.search-main {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.search-input-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: #21262D;
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  padding: 0.25rem 0.5rem;
}

.search-icon-main {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  color: var(--text-muted, #484F58);
  margin-left: 0.5rem;
}

.search-input-main {
  flex: 1;
  min-height: 44px;
  border: none;
  background: transparent;
  color: var(--text-primary, #F0F6FC);
  font-size: 0.875rem;
  outline: none;
}
.search-input-main::placeholder {
  color: var(--text-muted, #484F58);
}

.voice-input-btn,
.ai-assistant-btn,
.filters-toggle {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  min-height: 36px;
  padding: 0.375rem 0.75rem;
  border-radius: var(--radius-sm, 8px);
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  background: transparent;
  color: var(--text-secondary, #8B949E);
  font-size: 0.75rem;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s;
}
.voice-input-btn svg,
.ai-assistant-btn svg,
.filters-toggle svg {
  width: 16px;
  height: 16px;
}
.voice-input-btn:hover,
.ai-assistant-btn:hover,
.filters-toggle:hover,
.filters-toggle.active {
  background: var(--bg-hover, #30363D);
  color: var(--text-primary, #F0F6FC);
  border-color: var(--border-strong, rgba(255,255,255,0.16));
}
.voice-input-btn.listening {
  color: var(--danger, #F85149);
  border-color: var(--danger, #F85149);
}

.quick-filters {
  display: flex;
  gap: 0.5rem;
  overflow-x: auto;
  padding-bottom: 0.25rem;
  scrollbar-width: none;
}
.quick-filters::-webkit-scrollbar { display: none; }

.activity-chip {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.375rem 0.75rem;
  border-radius: 999px;
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  background: transparent;
  color: var(--text-secondary, #8B949E);
  font-size: 0.75rem;
  white-space: nowrap;
  cursor: pointer;
  transition: all 0.15s;
}
.activity-chip:hover {
  border-color: var(--accent, #00D4FF);
  color: var(--accent, #00D4FF);
}
.activity-chip.active {
  background: var(--accent-muted, rgba(0,212,255,0.1));
  border-color: var(--accent, #00D4FF);
  color: var(--accent, #00D4FF);
}

.advanced-filters {
  background: var(--bg-card, #21262D);
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  border-radius: var(--radius-md, 12px);
  padding: 1rem;
}
.filter-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 0.75rem;
}
.filter-group label {
  display: block;
  font-size: 0.75rem;
  color: var(--text-secondary, #8B949E);
  margin-bottom: 0.25rem;
}
.filter-select,
.filter-input {
  width: 100%;
  min-height: 36px;
  padding: 0.25rem 0.5rem;
  background: var(--bg-hover, #30363D);
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  border-radius: var(--radius-sm, 8px);
  color: var(--text-primary, #F0F6FC);
  font-size: 0.8125rem;
}
.clear-filters-btn {
  margin-top: 0.75rem;
  padding: 0.375rem 0.75rem;
  border-radius: var(--radius-sm, 8px);
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  background: transparent;
  color: var(--text-secondary, #8B949E);
  font-size: 0.75rem;
  cursor: pointer;
}

.search-results {
  margin-top: 1rem;
}
.results-header h3 {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--text-primary, #F0F6FC);
  margin-bottom: 0.75rem;
}
.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1rem;
}
.tour-result-card {
  display: flex;
  flex-direction: column;
  background: var(--bg-card, #21262D);
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  border-radius: var(--radius-lg, 20px);
  overflow: hidden;
  text-decoration: none;
  transition: all 0.2s;
}
.tour-result-card:hover {
  border-color: var(--border-strong, rgba(255,255,255,0.16));
  box-shadow: var(--shadow-md, 0 4px 16px rgba(0,0,0,0.4));
}
.tour-result-image {
  position: relative;
  height: 180px;
  background: var(--bg-hover, #30363D);
}
.tour-placeholder {
  width: 100%;
  height: 100%;
  background: var(--bg-hover, #30363D);
}
.difficulty-badge {
  position: absolute;
  top: 0.5rem;
  left: 0.5rem;
  font-size: 0.6875rem;
  padding: 0.125rem 0.5rem;
  border-radius: 999px;
  background: rgba(0,0,0,0.5);
  color: #fff;
}
.tour-result-content {
  padding: 0.75rem 1rem;
}
.tour-result-content h4 {
  font-size: 0.9375rem;
  font-weight: 600;
  color: var(--text-primary, #F0F6FC);
  margin-bottom: 0.25rem;
}
.tour-description {
  font-size: 0.8125rem;
  color: var(--text-secondary, #8B949E);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.tour-meta {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-top: 0.5rem;
  font-size: 0.75rem;
  color: var(--text-muted, #484F58);
}
.tour-meta svg {
  width: 14px;
  height: 14px;
}
.tour-duration,
.tour-rating {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}
.tour-price {
  margin-top: 0.5rem;
  font-size: 1rem;
  font-weight: 700;
  color: var(--accent, #00D4FF);
}

.search-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 2rem;
  color: var(--text-secondary, #8B949E);
}
.spinner-large {
  width: 24px;
  height: 24px;
  border: 2px solid var(--border, rgba(255,255,255,0.08));
  border-top-color: var(--accent, #00D4FF);
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.no-results {
  text-align: center;
  padding: 2rem;
}
.no-results-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto 0.75rem;
  border-radius: 50%;
  background: var(--bg-hover, #30363D);
}
.no-results h3 {
  font-size: 1rem;
  color: var(--text-primary, #F0F6FC);
  margin-bottom: 0.25rem;
}
.no-results p {
  font-size: 0.8125rem;
  color: var(--text-secondary, #8B949E);
  margin-bottom: 0.75rem;
}
.try-ai-btn {
  padding: 0.5rem 1rem;
  border-radius: var(--radius-md, 12px);
  background: var(--accent, #00D4FF);
  color: #fff;
  font-size: 0.8125rem;
  font-weight: 500;
  border: none;
  cursor: pointer;
}

.ai-search-modal {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.6);
  padding: 1rem;
}
.ai-search-content {
  width: 100%;
  max-width: 560px;
  background: var(--bg-card, #21262D);
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  border-radius: var(--radius-lg, 20px);
  overflow: hidden;
}
.ai-search-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid var(--border, rgba(255,255,255,0.08));
}
.ai-search-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}
.ai-search-title h3 {
  font-size: 0.9375rem;
  font-weight: 600;
  color: var(--text-primary, #F0F6FC);
}
.ai-search-title p {
  font-size: 0.75rem;
  color: var(--text-secondary, #8B949E);
}
.ai-icon {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--accent-muted, rgba(0,212,255,0.1));
}
.ai-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-secondary, #8B949E);
  cursor: pointer;
  border-radius: 50%;
}
.ai-close svg { width: 18px; height: 18px; }
.ai-close:hover { background: var(--bg-hover, #30363D); }

.ai-search-body {
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}
.ai-examples p {
  font-size: 0.75rem;
  color: var(--text-muted, #484F58);
  margin-bottom: 0.5rem;
}
.ai-example-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.375rem;
}
.ai-example-chips button {
  padding: 0.375rem 0.75rem;
  border-radius: 999px;
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  background: transparent;
  color: var(--text-secondary, #8B949E);
  font-size: 0.75rem;
  cursor: pointer;
  transition: all 0.15s;
}
.ai-example-chips button:hover {
  border-color: var(--accent, #00D4FF);
  color: var(--accent, #00D4FF);
}
.ai-input {
  width: 100%;
  padding: 0.75rem;
  border-radius: var(--radius-md, 12px);
  border: 1px solid var(--border, rgba(255,255,255,0.08));
  background: var(--bg-hover, #30363D);
  color: var(--text-primary, #F0F6FC);
  font-size: 0.8125rem;
  resize: vertical;
}
.ai-input::placeholder { color: var(--text-muted, #484F58); }
.ai-search-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  min-height: 44px;
  padding: 0.5rem 1rem;
  border-radius: var(--radius-md, 12px);
  background: var(--accent, #00D4FF);
  color: #fff;
  font-size: 0.875rem;
  font-weight: 500;
  border: none;
  cursor: pointer;
}
.ai-search-btn:disabled { opacity: 0.5; }
.ai-search-btn svg { width: 18px; height: 18px; }
.spinner {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}
.ai-response {
  background: var(--accent-muted, rgba(0,212,255,0.1));
  border-radius: var(--radius-md, 12px);
  padding: 0.75rem;
}
.ai-response-header {
  margin-bottom: 0.5rem;
}
.ai-badge {
  font-size: 0.6875rem;
  font-weight: 600;
  color: var(--accent, #00D4FF);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}
.ai-response p {
  font-size: 0.8125rem;
  color: var(--text-primary, #F0F6FC);
  line-height: 1.5;
}

/* =============================================
   DESIGN SYSTEM — Utility Classes
   Primenyayutsya globalno cherez Tailwind @layer.
   Obespechivayut edinoobraznyj vid vsekh stranic.
   ============================================= */

@layer components {
  /* Bazovyj fon stranicy i tekst -- nasleduyetsya vsemi stranicami */
  .ds-page {
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
  }

  /* Kartochka */
  .ds-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    transition: all 0.2s;
  }
  .ds-card:hover {
    box-shadow: var(--shadow-md);
    border-color: var(--border-strong);
  }

  /* Pole vvoda */
  .ds-input {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    min-height: 44px;
    padding: 0 1rem;
    transition: border-color 0.2s;
  }
  .ds-input::placeholder {
    color: var(--text-muted);
  }
  .ds-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 1px var(--accent);
    outline: none;
  }

  /* Knopka primary */
  .ds-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    min-height: 44px;
    padding: 0 1rem;
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    transition: all 0.2s;
    cursor: pointer;
  }
  .ds-btn-primary {
    background: var(--accent);
    color: #0D1117;
  }
  .ds-btn-primary:hover {
    opacity: 0.9;
  }
  .ds-btn-secondary {
    background: transparent;
    border: 1px solid var(--border-strong);
    color: var(--text-primary);
  }
  .ds-btn-secondary:hover {
    background: var(--bg-hover);
  }
  .ds-btn-danger {
    background: var(--danger);
    color: white;
  }
  .ds-btn-danger:hover {
    opacity: 0.9;
  }

  /* Sekciya stranicy */
  .ds-section {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
  }

  /* Badge statusov */
  .ds-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
  }

  /* Zagalovki */
  .ds-h1 {
    font-size: 2.25rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
  }
  .ds-h2 {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
  }
  .ds-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
  }

  /* Skeleton loading */
  .ds-skeleton {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
}

/* Globalnye overrajdy -- kazhdaya stranica poluchaet korrektnyj fon */
body {
  background: var(--bg-primary);
  color: var(--text-primary);
}

/* Scrollbar pod temnuyu/svetluyu temu */
:root[data-theme="light"] ::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.03);
}
:root[data-theme="light"] ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}
:root[data-theme="light"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

/* ===== Star field effect for hero section ===== */
.hero-stars {
  position: relative;
}
.hero-stars::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0.3;
  pointer-events: none;
  background-image:
    radial-gradient(1px 1px at  5%  8%, #fff, transparent),
    radial-gradient(1px 1px at 12% 45%, #fff, transparent),
    radial-gradient(1px 1px at 18% 22%, #fff, transparent),
    radial-gradient(1px 1px at 25% 70%, #fff, transparent),
    radial-gradient(1px 1px at 32% 15%, #fff, transparent),
    radial-gradient(1px 1px at 38% 55%, #fff, transparent),
    radial-gradient(1px 1px at 42% 82%, #fff, transparent),
    radial-gradient(1px 1px at 48% 35%, #fff, transparent),
    radial-gradient(1px 1px at 55% 62%, #fff, transparent),
    radial-gradient(1px 1px at 60% 10%, #fff, transparent),
    radial-gradient(1px 1px at 65% 48%, #fff, transparent),
    radial-gradient(1px 1px at 72% 75%, #fff, transparent),
    radial-gradient(1px 1px at 78% 28%, #fff, transparent),
    radial-gradient(1px 1px at 82% 58%, #fff, transparent),
    radial-gradient(1px 1px at 88% 18%, #fff, transparent),
    radial-gradient(1px 1px at 92% 42%, #fff, transparent),
    radial-gradient(1px 1px at 95% 68%, #fff, transparent),
    radial-gradient(1px 1px at  3% 90%, #fff, transparent),
    radial-gradient(1px 1px at 15% 60%, #fff, transparent),
    radial-gradient(1px 1px at 50% 50%, #fff, transparent),
    radial-gradient(1.5px 1.5px at 20% 30%, #fff, transparent),
    radial-gradient(1.5px 1.5px at 70% 20%, #fff, transparent),
    radial-gradient(1.5px 1.5px at 85% 85%, #fff, transparent),
    radial-gradient(1.5px 1.5px at 45% 90%, #fff, transparent);
}
