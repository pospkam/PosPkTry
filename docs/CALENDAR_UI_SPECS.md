# 🎨 UI СПЕЦИФИКАЦИИ КАЛЕНДАРЕЙ БРОНИРОВАНИЯ
## Визуальные примеры и логика работы

**Дата:** 5 ноября 2025

---

## 📱 1. КАЛЕНДАРЬ ДЛЯ ОТЕЛЕЙ (StayDatePicker)

### DESKTOP ВЕРСИЯ

```
┌──────────────────────────────────────────────────────────────┐
│  Когда вы хотите остановиться?                               │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────── Заезд ──────────┐  ┌────── Выезд ──────────┐  │
│  │  15 января 2024         ▼  │  │  20 января 2024    ▼  │  │
│  └────────────────────────────┘  └───────────────────────┘  │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐ │
│  │            ЯНВАРЬ 2024          ФЕВРАЛЬ 2024          │ │
│  ├────────────────────────────────────────────────────────┤ │
│  │  Пн Вт Ср Чт Пт Сб Вс    Пн Вт Ср Чт Пт Сб Вс        │ │
│  │   1  2  3  4  5  6  7              1  2  3  4        │ │
│  │   8  9 10 11 12 13 14      5  6  7  8  9 10 11        │ │
│  │  [15][16][17][18][19]20 21 12 13 14 15 16 17 18        │ │
│  │   22 23 24 25 26 27 28    19 20 21 22 23 24 25        │ │
│  │   29 30 31                26 27 28 29                  │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                              │
│  [15] - Check-in (синий)                                    │
│  [16][17][18][19] - Выбранный диапазон (жёлтый)            │
│  20 - Check-out (зелёный)                                   │
│                                                              │
│  ⚠️ Минимум 2 ночи                                          │
│  💰 3 450₽ × 5 ночей = 17 250₽                             │
│                                                              │
│  ┌──────────────────────┐  ┌────────────────────────────┐  │
│  │      Отмена          │  │    Применить (Enter)       │  │
│  └──────────────────────┘  └────────────────────────────┘  │
└──────────────────────────────────────────────────────────────┘
```

### MOBILE ВЕРСИЯ

```
┌────────────────────────────┐
│ ← Выбор дат                │
├────────────────────────────┤
│                            │
│  🗓️ Заезд                  │
│  15 января 2024            │
│                            │
│  🗓️ Выезд                  │
│  20 января 2024            │
│                            │
│  ━━━━━━━━━━━━━━━━━━━━━━━━  │
│                            │
│     ЯНВАРЬ 2024            │
│  ┌──────────────────────┐  │
│  │ Пн Вт Ср Чт Пт Сб Вс │  │
│  │  1  2  3  4  5  6  7 │  │
│  │  8  9 10 11 12 13 14 │  │
│  │ [15][16][17][18][19] │  │
│  │  20 22 23 24 25 26   │  │
│  │  27 28 29 30 31      │  │
│  └──────────────────────┘  │
│                            │
│  (Свайп вправо/влево)      │
│                            │
│  💰 5 ночей • 17 250₽      │
│                            │
├────────────────────────────┤
│   [ ПРИМЕНИТЬ ДАТЫ ]       │
└────────────────────────────┘
```

### ЛОГИКА РАБОТЫ

```javascript
// Шаг 1: Клик на дату
onClick(15 января) → checkIn = 15 января

// Шаг 2: Клик на вторую дату
onClick(20 января) → checkOut = 20 января

// Шаг 3: Валидация
if (checkOut < checkIn) {
  // Сбросить и начать заново
  checkIn = 20 января
  checkOut = null
}

// Шаг 4: Проверка минимума
nights = checkOut - checkIn = 5 ночей
if (nights < minNights) {
  showError("Минимум 2 ночи")
}

// Шаг 5: Проверка доступности
const availability = await fetch(`/api/accommodations/${id}/availability`, {
  checkIn: '2024-01-15',
  checkOut: '2024-01-20'
});

if (!availability.available) {
  showError("К сожалению, номера заняты на эти даты")
}

// Шаг 6: Расчёт цены
totalPrice = pricePerNight × nights
```

---

## 🏔️ 2. КАЛЕНДАРЬ ДЛЯ ТУРОВ (TourDatePicker)

### ГРУППОВОЙ ТУР (Фиксированные даты)

```
┌──────────────────────────────────────────────────────────────┐
│  Вулканы Камчатки • 5 дней                                   │
│  Сложность: Средняя 🥾🥾                                      │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  Выберите дату начала тура:                                  │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐ │
│  │                 ИЮНЬ 2024                              │ │
│  ├────────────────────────────────────────────────────────┤ │
│  │  Пн Вт Ср Чт Пт Сб Вс                                  │ │
│  │            1  2  3  4  5                               │ │
│  │   6  7  8  9 [10]⚪ 11 12  ← 10 мест, хорошая погода   │ │
│  │  13 14 [15]🟡 16 17 18 19  ← 3 места, ветрено         │ │
│  │  [20]🟢 21 22 23 24 25 26  ← 12 мест, отличная погода  │ │
│  │  27 28 29 [30]❌           ← Места закончились         │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                              │
│  Легенда:                                                    │
│  🟢 Много мест (>10)     ⚪ Достаточно (5-10)               │
│  🟡 Мало мест (<5)       ❌ Места закончились               │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ Выбрано: 10 июня 2024                               │   │
│  │ Длительность: 5 дней (до 14 июня)                   │   │
│  │ Осталось мест: 10 из 12                             │   │
│  │ Цена: 45 000₽ на человека                           │   │
│  │                                                      │   │
│  │ 👥 Участников: [ - ] 2 [ + ]                        │   │
│  │                                                      │   │
│  │ Итого: 90 000₽                                       │   │
│  │                                                      │   │
│  │           [ ЗАБРОНИРОВАТЬ ТУР ]                      │   │
│  └─────────────────────────────────────────────────────┘   │
└──────────────────────────────────────────────────────────────┘
```

### ИНДИВИДУАЛЬНЫЙ ТУР (Гибкие даты)

```
┌──────────────────────────────────────────────────────────────┐
│  Медвежье сафари • 1 день                                    │
│  Сложность: Лёгкая 🥾                                        │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  Выберите дату и время:                                      │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐ │
│  │              ИЮЛЬ - СЕНТЯБРЬ 2024                      │ │
│  ├────────────────────────────────────────────────────────┤ │
│  │  Любая дата с 1 июля по 30 сентября                    │ │
│  │  (зависит от погоды)                                   │ │
│  │                                                        │ │
│  │  📅 Выбранная дата: [15 июля 2024        ▼]           │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                              │
│  Выберите время:                                             │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐ │
│  │  🌅 06:00 - 14:00 (Утренний тур)                       │ │
│  │     ✅ Доступно • 5 мест • 28 000₽                     │ │
│  │     └─ Рекомендуем! Медведи наиболее активны          │ │
│  │                                                        │ │
│  │  ☀️ 10:00 - 18:00 (Дневной тур)                        │ │
│  │     ✅ Доступно • 3 места • 28 000₽                    │ │
│  │                                                        │ │
│  │  🌆 14:00 - 22:00 (Вечерний тур)                       │ │
│  │     ⚠️ Осталось 2 места • 32 000₽                     │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                              │
│  ⚠️ Погодные условия проверяются за 24ч до тура             │
│                                                              │
│  👥 Участников: [ - ] 2 [ + ]  (макс. 6)                    │
│  💰 Итого: 56 000₽                                           │
│                                                              │
│  [ ЗАБРОНИРОВАТЬ ]                                           │
└──────────────────────────────────────────────────────────────┘
```

### ЛОГИКА РАБОТЫ

```javascript
// ГРУППОВОЙ ТУР
// Шаг 1: Загрузить доступные даты
const availableDates = await fetch(`/api/tours/${id}/available-dates`);
// Результат:
[
  { date: '2024-06-10', available: 10, weather: 'good' },
  { date: '2024-06-15', available: 3, weather: 'windy' },
  { date: '2024-06-20', available: 12, weather: 'excellent' },
  { date: '2024-06-30', available: 0, weather: 'good' }
]

// Шаг 2: Показать только эти даты в календаре
<DatePicker
  includeDates={availableDates.map(d => d.date)}
  dayClassName={(date) => {
    const info = availableDates.find(d => d.date === date);
    if (info.available === 0) return 'sold-out';
    if (info.available < 5) return 'few-seats';
    if (info.available > 10) return 'many-seats';
    return 'available';
  }}
/>

// Шаг 3: При выборе даты показать детали
onDateSelect(date) {
  const tourInfo = availableDates.find(d => d.date === date);
  showDetails({
    date: tourInfo.date,
    duration: tour.duration,
    availableSeats: tourInfo.available,
    weather: tourInfo.weather,
    price: tour.price
  });
}
```

```javascript
// ИНДИВИДУАЛЬНЫЙ ТУР
// Шаг 1: Выбор любой даты в сезоне
<DatePicker
  minDate={new Date(2024, 6, 1)}  // 1 июля
  maxDate={new Date(2024, 8, 30)} // 30 сентября
  filterDate={(date) => {
    // Только даты в будущем
    return date >= new Date();
  }}
/>

// Шаг 2: После выбора даты загрузить слоты времени
onDateSelect(date) {
  const timeSlots = await fetch(`/api/tours/${id}/time-slots`, {
    date: date
  });
  
  // Результат:
  [
    { time: '06:00-14:00', available: 5, price: 28000 },
    { time: '10:00-18:00', available: 3, price: 28000 },
    { time: '14:00-22:00', available: 2, price: 32000 }
  ]
  
  showTimeSlots(timeSlots);
}

// Шаг 3: Проверка погоды за 24ч
scheduleWeatherCheck(date - 24h, () => {
  const weather = await checkWeather();
  if (weather.isBad) {
    notifyUser("Тур отменён из-за погоды. Полный возврат.");
  }
});
```

---

## 🚌 3. КАЛЕНДАРЬ ДЛЯ ТРАНСФЕРОВ (TransferDateTimePicker)

### DESKTOP ВЕРСИЯ

```
┌──────────────────────────────────────────────────────────────┐
│  Трансфер: Петропавловск → Долина гейзеров                   │
│  Расстояние: 180 км • Время в пути: ~3 часа                  │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  Выберите дату:                                              │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐ │
│  │              ЯНВАРЬ 2024                               │ │
│  ├────────────────────────────────────────────────────────┤ │
│  │  Пн Вт Ср Чт Пт Сб Вс                                  │ │
│  │   1  2  3  4  5  6  7                                  │ │
│  │   8  9 10 11 12 13 14                                  │ │
│  │  [15]16 17 18 19 20 21  ← Выбрано                     │ │
│  │  22 23 24 25 26 27 28                                  │ │
│  │  29 30 31                                              │ │
│  └────────────────────────────────────────────────────────┘ │
│                                                              │
│  Доступные рейсы на 15 января 2024:                          │
│                                                              │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 🚌 АВТОБУС • 09:00 → 12:00 (3ч)                        ││
│  │    ПАЗ-4234 • Водитель: Иван Петров (⭐4.9)            ││
│  │    🪑 12 мест свободно из 25                           ││
│  │    💰 2 500₽ на человека                               ││
│  │    [  ВЫБРАТЬ ЭТОТ РЕЙС  ]                             ││
│  └─────────────────────────────────────────────────────────┘│
│                                                              │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 🚐 МИКРОАВТОБУС • 14:00 → 17:00 (3ч)                   ││
│  │    ГАЗель Next • Водитель: Мария Сидорова (⭐4.8)      ││
│  │    🪑 8 мест свободно из 12                            ││
│  │    💰 2 500₽ на человека                               ││
│  │    ✨ Комфорт класс • WiFi • Кондиционер               ││
│  │    [  ВЫБРАТЬ ЭТОТ РЕЙС  ]                             ││
│  └─────────────────────────────────────────────────────────┘│
│                                                              │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 🚁 ВЕРТОЛЁТ • 18:00 → 19:30 (1.5ч)                     ││
│  │    Ми-8 • Пилот: Алексей Козлов (⭐4.9)                ││
│  │    🪑 6 мест свободно из 8                             ││
│  │    💰 8 000₽ на человека                               ││
│  │    ✨ VIP • Панорамный вид • Быстро                    ││
│  │    ⚠️ Зависит от погоды                                ││
│  │    [  ВЫБРАТЬ ЭТОТ РЕЙС  ]                             ││
│  └─────────────────────────────────────────────────────────┘│
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### ПОСЛЕ ВЫБОРА РЕЙСА

```
┌──────────────────────────────────────────────────────────────┐
│  Подтверждение бронирования                                  │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ✅ Выбранный рейс:                                          │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 🚌 15 января 2024 • 09:00 → 12:00                      ││
│  │ Петропавловск → Долина гейзеров                        ││
│  │ Автобус ПАЗ-4234 • Водитель: Иван Петров              ││
│  └─────────────────────────────────────────────────────────┘│
│                                                              │
│  👥 Количество пассажиров:                                   │
│  ┌─────────────────────────────────────────────────────────┐│
│  │  Взрослые: [ - ] 2 [ + ]  × 2 500₽ = 5 000₽           ││
│  │  Дети (до 12 лет): [ - ] 1 [ + ]  × 1 500₽ = 1 500₽  ││
│  └─────────────────────────────────────────────────────────┘│
│                                                              │
│  🎒 Дополнительные услуги:                                   │
│  ☐ Багаж (>20кг) • +500₽ за место                           │
│  ☐ Детское кресло • +300₽                                    │
│  ☐ Трансфер до отеля • +1 000₽                              │
│                                                              │
│  📋 Контактные данные:                                       │
│  ┌─────────────────────────────────────────────────────────┐│
│  │  Имя: [________________________]                       ││
│  │  Телефон: [____________________]                       ││
│  │  Email: [_______________________]                      ││
│  └─────────────────────────────────────────────────────────┘│
│                                                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                              │
│  💰 ИТОГО К ОПЛАТЕ: 6 500₽                                   │
│                                                              │
│  Способ оплаты:                                              │
│  ⚪ Онлайн (карта, СБП)                                      │
│  ⚪ Наличными водителю                                        │
│  ⚪ По счёту для юр. лиц                                     │
│                                                              │
│  ┌──────────────────────┐  ┌────────────────────────────┐  │
│  │      Назад           │  │    ЗАБРОНИРОВАТЬ           │  │
│  └──────────────────────┘  └────────────────────────────┘  │
│                                                              │
│  ⚠️ Бронирование действует 30 минут                         │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### ЛОГИКА РАБОТЫ

```javascript
// Шаг 1: Выбор даты
onDateSelect(date) {
  const schedules = await fetch(`/api/transfers/${routeId}/schedules`, {
    date: date
  });
  
  // Результат:
  [
    {
      id: 'schedule-1',
      vehicleType: 'bus',
      departureTime: '09:00',
      arrivalTime: '12:00',
      availableSeats: 12,
      totalSeats: 25,
      price: 2500,
      driver: { name: 'Иван Петров', rating: 4.9 },
      features: ['wifi', 'ac']
    },
    {
      id: 'schedule-2',
      vehicleType: 'minibus',
      departureTime: '14:00',
      arrivalTime: '17:00',
      availableSeats: 8,
      totalSeats: 12,
      price: 2500,
      driver: { name: 'Мария Сидорова', rating: 4.8 },
      features: ['wifi', 'ac', 'comfort']
    },
    {
      id: 'schedule-3',
      vehicleType: 'helicopter',
      departureTime: '18:00',
      arrivalTime: '19:30',
      availableSeats: 6,
      totalSeats: 8,
      price: 8000,
      driver: { name: 'Алексей Козлов', rating: 4.9 },
      features: ['vip', 'panoramic'],
      weatherDependent: true
    }
  ]
  
  showSchedules(schedules);
}

// Шаг 2: Выбор рейса
onScheduleSelect(scheduleId) {
  selectedSchedule = schedules.find(s => s.id === scheduleId);
  showBookingForm(selectedSchedule);
}

// Шаг 3: Блокировка мест (30 минут)
onBookingFormOpen(scheduleId, passengers) {
  await fetch(`/api/transfers/hold-seats`, {
    method: 'POST',
    body: JSON.stringify({
      scheduleId,
      seatsCount: passengers,
      holdDuration: 1800 // 30 минут в секундах
    })
  });
  
  startTimer(1800); // Таймер обратного отсчёта
}

// Шаг 4: Подтверждение бронирования
onConfirmBooking(bookingData) {
  const booking = await fetch(`/api/transfers/book`, {
    method: 'POST',
    body: JSON.stringify(bookingData)
  });
  
  if (booking.success) {
    showConfirmation(booking.id);
    sendEmail(booking.details);
  }
}
```

---

## 🎨 ЦВЕТОВАЯ СХЕМА

### Для всех календарей:

```css
/* Базовые цвета */
--calendar-bg: #0b0b0b;           /* Чёрный фон */
--calendar-border: #222222;       /* Тёмно-серая рамка */
--calendar-text: #ffffff;         /* Белый текст */
--calendar-text-muted: #999999;   /* Серый текст */

/* Цвета дат */
--date-default: #ffffff;          /* Обычная дата */
--date-hover: #E6C149;            /* Наведение (золотой) */
--date-disabled: #333333;         /* Недоступная дата */
--date-past: #555555;             /* Прошедшая дата */

/* Состояния выбора (отели) */
--date-checkin: #3B82F6;          /* Check-in (синий) */
--date-range: #FCD34D;            /* Диапазон (жёлтый) */
--date-checkout: #10B981;         /* Check-out (зелёный) */

/* Индикаторы доступности (туры) */
--available-many: #10B981;        /* Много мест (зелёный) */
--available-enough: #FFFFFF;      /* Достаточно (белый) */
--available-few: #F59E0B;         /* Мало мест (оранжевый) */
--available-sold: #EF4444;        /* Продано (красный) */

/* Акценты */
--accent-gold: #E6C149;           /* Золотой */
--accent-blue: #3B82F6;           /* Синий */
--accent-green: #10B981;          /* Зелёный */
```

---

## 📏 РАЗМЕРЫ И ОТСТУПЫ

```css
/* Desktop */
.calendar-container {
  max-width: 800px;
  padding: 24px;
  border-radius: 16px;
}

.calendar-day {
  width: 44px;
  height: 44px;
  font-size: 14px;
}

/* Mobile */
@media (max-width: 768px) {
  .calendar-container {
    max-width: 100%;
    padding: 16px;
    border-radius: 0;
  }
  
  .calendar-day {
    width: 40px;
    height: 40px;
    font-size: 16px; /* Больше для удобства тапа */
  }
}
```

---

## ⌨️ КЛАВИАТУРНАЯ НАВИГАЦИЯ

```
ОТЕЛИ:
↑↓←→    Навигация по датам
Enter   Выбрать дату (check-in/check-out)
Esc     Закрыть календарь
Tab     Переход между полями
Space   Выбрать текущую дату

ТУРЫ:
↑↓←→    Навигация по датам
Enter   Выбрать дату тура
Esc     Закрыть календарь
1-3     Быстрый выбор времени (утро/день/вечер)

ТРАНСФЕРЫ:
↑↓      Навигация по рейсам
Enter   Выбрать рейс
Esc     Назад к календарю
```

---

## 📱 MOBILE UX ОСОБЕННОСТИ

### Fullscreen календарь

```
┌────────────────────────────┐
│ ←  Выбор дат          ✕    │ ← Sticky header
├────────────────────────────┤
│                            │
│  (Календарь на весь экран) │
│                            │
│     ↕️                      │
│  Scrollable                │
│     ↕️                      │
│                            │
├────────────────────────────┤
│  [ ПРИМЕНИТЬ ДАТЫ ]        │ ← Sticky footer
└────────────────────────────┘
```

### Swipe жесты

```javascript
// Свайп влево → следующий месяц
onSwipeLeft() {
  nextMonth();
}

// Свайп вправо → предыдущий месяц
onSwipeRight() {
  prevMonth();
}

// Долгое нажатие на дату → быстрый выбор диапазона
onLongPress(date) {
  if (!checkIn) {
    checkIn = date;
  } else {
    checkOut = date;
    calculateRange(checkIn, checkOut);
  }
}
```

---

## 🔔 УВЕДОМЛЕНИЯ И ПОДСКАЗКИ

### Tooltips

```javascript
// При наведении на дату
<Tooltip date={date}>
  {date.available 
    ? `${date.available} мест • ${date.price}₽`
    : 'Места закончились'
  }
</Tooltip>

// При ошибке
<ErrorTooltip>
  ⚠️ Минимум 2 ночи
</ErrorTooltip>
```

### Inline подсказки

```
┌────────────────────────────┐
│  💡 Совет:                 │
│  Бронируйте заранее!       │
│  В летний сезон места      │
│  быстро заканчиваются.     │
└────────────────────────────┘
```

---

## ✨ АНИМАЦИИ

```css
/* Появление календаря */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Выбор даты */
@keyframes selectDate {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

/* Заполнение диапазона */
@keyframes fillRange {
  from {
    opacity: 0;
    width: 0;
  }
  to {
    opacity: 1;
    width: 100%;
  }
}
```

---

## 🎯 ИТОГО

**Эти спецификации обеспечивают:**

✅ Консистентный UX между всеми типами бронирований  
✅ Понятную визуальную иерархию  
✅ Отличную мобильную адаптацию  
✅ Accessibility (WCAG AA)  
✅ Современный дизайн в стиле проекта  

**Готовы к реализации! 🚀**



