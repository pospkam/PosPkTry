# üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ - –î–ï–ü–õ–û–ô KAMHUB
## –ó–∞ 30 –º–∏–Ω—É—Ç –Ω–∞ Timeweb Cloud

**–î–∞—Ç–∞:** 7 –Ω–æ—è–±—Ä—è 2025  
**–°–µ—Ä–≤–µ—Ä:** 5.129.248.224  
**–í—Ä–µ–º—è:** ~30 –º–∏–Ω—É—Ç

---

## ‚ö° –≠–ö–°–ü–†–ï–°–° –î–ï–ü–õ–û–ô (4 –∫–æ–º–∞–Ω–¥—ã)

### 1Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@5.129.248.224
# –ü–∞—Ä–æ–ª—å: REPLACE_WITH_SERVER_PASSWORD
```

### 2Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
```bash
cd /var/www
git clone [–í–ê–®_–†–ï–ü–û–ó–ò–¢–û–†–ò–ô] kamhub
cd kamhub
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
```bash
chmod +x deploy-kamhub.sh
./deploy-kamhub.sh
```

### 4Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á–∏
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω
cp ENV_PRODUCTION_TEMPLATE.txt .env.production

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —ç—Ç–∏ –∫–ª—é—á–∏):
nano .env.production

# –ó–ê–ü–û–õ–ù–ò–¢–ï:
# CLOUDPAYMENTS_PUBLIC_KEY=...
# DEEPSEEK_API_KEY=...
# SMTP_PASSWORD=...
# YANDEX_MAPS_KEY=...

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å: Ctrl+O, Enter, Ctrl+X

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
pm2 restart kamhub
```

### ‚úÖ –ì–û–¢–û–í–û!

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ: http://5.129.248.224:3000

---

## üéØ –ß–¢–û –ë–£–î–ï–¢ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ù–ê–°–¢–†–û–ï–ù–û

### ‚úÖ –°–∫—Ä–∏–ø—Ç `deploy-kamhub.sh` –¥–µ–ª–∞–µ—Ç:

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ (Node.js, PostgreSQL, PM2)
2. ‚úÖ –°–æ–∑–¥–∞—ë—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `kamhub_production`
3. ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç 14 SQL —Å—Ö–µ–º (58+ —Ç–∞–±–ª–∏—Ü!)
4. ‚úÖ –°–æ–∑–¥–∞—ë—Ç 6 –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
6. ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç Next.js –ø—Ä–æ–µ–∫—Ç
7. ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç —á–µ—Ä–µ–∑ PM2 (2 –∏–Ω—Å—Ç–∞–Ω—Å–∞)
8. ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Nginx (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
9. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
10. ‚úÖ –í—ã–≤–æ–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

---

## üìä –î–ï–ú–û-–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç:

```
1. tourist@kamhub.ru    - –î–µ–º–æ –¢—É—Ä–∏—Å—Ç
2. operator@kamhub.ru   - –î–µ–º–æ –û–ø–µ—Ä–∞—Ç–æ—Ä
3. agent@kamhub.ru      - –î–µ–º–æ –ê–≥–µ–Ω—Ç
4. guide@kamhub.ru      - –î–µ–º–æ –ì–∏–¥
5. transfer@kamhub.ru   - –î–µ–º–æ –¢—Ä–∞–Ω—Å—Ñ–µ—Ä-–û–ø–µ—Ä–∞—Ç–æ—Ä
6. admin@kamhub.ru      - –î–µ–º–æ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
```

–î–ª—è –≤—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-—Ä–µ–∂–∏–º: `/api/auth/demo`

---

## üîß –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
pm2 logs kamhub
pm2 logs kamhub --lines 100
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:
```bash
pm2 restart kamhub
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞:
```bash
cd /var/www/kamhub
git pull
npm install
npm run build
pm2 restart kamhub
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```bash
pm2 monit
pm2 status
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–ò

### 1. Health Check:
```bash
curl http://localhost:3000/api/health
# –û—Ç–≤–µ—Ç: {"success":true,"status":"ok"}
```

### 2. –¢—É—Ä—ã:
```bash
curl http://localhost:3000/api/tours
```

### 3. –ü–æ–≥–æ–¥–∞:
```bash
curl "http://localhost:3000/api/weather?lat=53.0375&lng=158.6556"
```

### 4. AI:
```bash
curl -X POST http://localhost:3000/api/ai \
  -H "Content-Type: application/json" \
  -d '{"messages":[{"role":"user","content":"–ü—Ä–∏–≤–µ—Ç!"}]}'
```

---

## üìù API –ö–õ–Æ–ß–ò –î–õ–Ø –ó–ê–ü–û–õ–ù–ï–ù–ò–Ø

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
1. **CloudPayments** - –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ cloudpayments.ru
   - –ü–æ–ª—É—á–∏—Ç–µ Public Key –∏ API Secret

2. **DeepSeek** - –¥–ª—è AI
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ platform.deepseek.com
   - –ü–æ–ª—É—á–∏—Ç–µ API Key

3. **Yandex Email** - –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Yandex –∞–∫–∫–∞—É–Ω—Ç
   - –°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

4. **Yandex Maps** - –¥–ª—è –∫–∞—Ä—Ç
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ developer.tech.yandex.ru
   - –ü–æ–ª—É—á–∏—Ç–µ API Key

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
5. **DeepSeek** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π AI
6. **OpenRouter** - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π AI
7. **Telegram Bot** - –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
8. **Sentry** - –¥–ª—è error tracking

---

## üÜò TROUBLESHOOTING

### –ü—Ä–æ–±–ª–µ–º–∞: npm –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs
```

### –ü—Ä–æ–±–ª–µ–º–∞: PostgreSQL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```bash
apt install -y postgresql postgresql-contrib postgis
```

### –ü—Ä–æ–±–ª–µ–º–∞: PM2 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```bash
npm install -g pm2
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
pm2 logs kamhub --err
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏
```

---

## üéâ –£–°–ü–ï–•!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

- üåê –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://–í–ê–®–ê_IP:3000
- üìä Dashboard —Ä–∞–±–æ—Ç–∞–µ—Ç
- üí≥ –ü–ª–∞—Ç–µ–∂–∏ –≥–æ—Ç–æ–≤—ã (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CloudPayments)
- ü§ñ AI –ø–æ–º–æ—â–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DeepSeek)
- üìß Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP)

---

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** ~30 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –õ—ë–≥–∫–∞—è (—Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω)  
**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –í—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ DEPLOY_TIMEWEB_GUIDE.md

üöÄ **–£–î–ê–ß–ù–û–ì–û –ó–ê–ü–£–°–ö–ê!**

