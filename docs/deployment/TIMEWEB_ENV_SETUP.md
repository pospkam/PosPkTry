# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Timeweb Cloud

## ‚ö° –ë–´–°–¢–†–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Timeweb Cloud, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.production`:

```bash
cd /var/www/kamchatour
nano .env.production
```

---

## üå¶Ô∏è –ü–û–ì–û–î–ê (–ö–†–ò–¢–ò–ß–ù–û!)

### Yandex Weather - –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä

‚ö†Ô∏è **–ë–ï–ó –≠–¢–û–ì–û –ö–õ–Æ–ß–ê –ü–û–ì–û–î–ê –ë–£–î–ï–¢ –†–ê–ë–û–¢–ê–¢–¨ –° –ú–ï–ù–¨–®–ï–ô –¢–û–ß–ù–û–°–¢–¨–Æ!**

```bash
YANDEX_WEATHER_API_KEY=–≤–∞—à_–∫–ª—é—á_–∏–∑_—è–Ω–¥–µ–∫—Å–∞
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:**
1. https://yandex.ru/dev/weather
2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí "–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
3. –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ:
   - **–¢–µ—Å—Ç–æ–≤—ã–π:** 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å, –ë–ï–°–ü–õ–ê–¢–ù–û 30 –¥–Ω–µ–π
   - **–ë–∞–∑–æ–≤—ã–π:** 50k –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å, ~1000‚ÇΩ/–º–µ—Å
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å API –∫–ª—é—á
5. –í—Å—Ç–∞–≤–∏—Ç—å –≤ `.env.production`
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: `pm2 restart kamchatour-hub`

**–ü–æ—á–µ–º—É Yandex –¥–ª—è –ö–∞–º—á–∞—Ç–∫–∏?**
- ‚úÖ –°–∞–º–∞—è –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (9/10 vs 7/10 —É Open-Meteo)
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏ –†–æ—Å–≥–∏–¥—Ä–æ–º–µ—Ç–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 15-30 –º–∏–Ω—É—Ç
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫—É –î–∞–ª—å–Ω–µ–≥–æ –í–æ—Å—Ç–æ–∫–∞ (–≤—É–ª–∫–∞–Ω—ã, –æ–∫–µ–∞–Ω, –≥–æ—Ä—ã)

**Fallback —Å–∏—Å—Ç–µ–º–∞:**
–ï—Å–ª–∏ Yandex –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ Open-Meteo (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)

**–¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
```typescript
// lib/config.ts
defaultProvider: 'yandex'  // ‚Üê Yandex –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
```

---

## üó∫Ô∏è –ö–ê–†–¢–´ (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

```bash
YANDEX_MAPS_API_KEY=–≤–∞—à_–∫–ª—é—á_–∫–∞—Ä—Ç
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:**
1. https://yandex.ru/dev/maps
2. –°–æ–∑–¥–∞—Ç—å JavaScript API –∫–ª—é—á
3. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–ª—é—á–∞

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–• (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–º `deploy-timeweb.sh`:

```bash
DATABASE_URL=postgresql://kamuser:–ü–ê–†–û–õ–¨@localhost:5432/kamchatour
```

**–ü–∞—Ä–æ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Timeweb Cloud PostgreSQL:**
```bash
# –ü–æ–ª—É—á–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–Ω–µ–ª–∏ Timeweb
DATABASE_URL=postgresql://user:password@db-—Ö—Ö—Ö—Ö.timeweb.cloud:5432/dbname
DATABASE_SSL=true
```

---

## ü§ñ AI (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –í–∞—Ä–∏–∞–Ω—Ç 1: DeepSeek (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
DEEPSEEK_API_KEY=sk-–≤–∞—à_–∫–ª—é—á
```

- –ù–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
- https://platform.deepseek.com

### –í–∞—Ä–∏–∞–Ω—Ç 2: Minimax/x.ai (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

```bash
MINIMAX_API_KEY=–≤–∞—à_–∫–ª—é—á
XAI_API_KEY=–≤–∞—à_–∫–ª—é—á
```

- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è failover
- –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏

---

## üí≥ –ü–õ–ê–¢–ï–ñ–ò (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### CloudPayments

```bash
CLOUDPAYMENTS_PUBLIC_ID=pk_–≤–∞—à_–ø—É–±–ª–∏—á–Ω—ã–π_–∫–ª—é—á
CLOUDPAYMENTS_API_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
```

https://cloudpayments.ru

### –ò–ª–∏ YooKassa (–Ø–Ω–¥–µ–∫—Å –ö–∞—Å—Å–∞)

```bash
YANDEX_PAYMENT_SHOP_ID=–≤–∞—à_shop_id
YANDEX_PAYMENT_SECRET_KEY=live_–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
```

https://yookassa.ru

---

## üìß EMAIL (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Timeweb SMTP (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
SMTP_HOST=smtp.timeweb.ru
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=–≤–∞—à_email@–≤–∞—à-–¥–æ–º–µ–Ω.ru
SMTP_PASS=–≤–∞—à_–ø–∞—Ä–æ–ª—å
EMAIL_FROM=noreply@kamchatour.ru
```

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**
1. –ü–∞–Ω–µ–ª—å Timeweb ‚Üí –ü–æ—á—Ç–∞
2. –°–æ–∑–¥–∞—Ç—å –ø–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è SMTP

### –ò–ª–∏ Gmail SMTP

```bash
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=–≤–∞—à_email@gmail.com
SMTP_PASS=–≤–∞—à_app_password
EMAIL_FROM=noreply@kamchatour.ru
```

---

## üì± SMS (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
SMS_RU_API_ID=–≤–∞—à_api_–∫–ª—é—á
```

https://sms.ru ‚Üí API –∫–ª—é—á–∏

---

## üí¨ TELEGRAM BOT (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=-1001234567890
```

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å:**
1. [@BotFather](https://t.me/botfather) ‚Üí `/newbot`
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Token
3. –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É
4. –£–∑–Ω–∞—Ç—å Chat ID —á–µ—Ä–µ–∑ [@userinfobot](https://t.me/userinfobot)

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–º:

```bash
JWT_SECRET=—Å–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞_64_—Å–∏–º–≤–æ–ª–∞
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_EXPIRES_IN=30d
```

---

## üåê –û–ö–†–£–ñ–ï–ù–ò–ï

```bash
NODE_ENV=production
NEXT_PUBLIC_APP_URL=http://–≤–∞—à_IP_–∏–ª–∏_–¥–æ–º–µ–Ω
PORT=3000
```

**IP –∞–¥—Ä–µ—Å –≤—ã–≤–æ–¥–∏—Ç—Å—è** –≤ –∫–æ–Ω—Ü–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Sentry

```bash
SENTRY_DSN=https://–≤–∞—à_–∫–ª—é—á@sentry.io/–ø—Ä–æ–µ–∫—Ç
NEXT_PUBLIC_SENTRY_DSN=https://–≤–∞—à_–∫–ª—é—á@sentry.io/–ø—Ä–æ–µ–∫—Ç
```

https://sentry.io

---

## ‚úÖ –ú–ò–ù–ò–ú–ê–õ–¨–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø (–†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `deploy-timeweb.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è:

```bash
‚úÖ DATABASE_URL              # –õ–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL
‚úÖ JWT_SECRET                # –°–ª—É—á–∞–π–Ω—ã–π —Å–µ–∫—Ä–µ—Ç
‚úÖ NODE_ENV=production       # –†–µ–∂–∏–º production
‚úÖ NEXT_PUBLIC_APP_URL       # IP —Å–µ—Ä–≤–µ—Ä–∞
```

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!** –ù–æ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ:

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ:

```bash
# –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ö–∞–º—á–∞—Ç–∫–∏
1. ‚úÖ YANDEX_WEATHER_API_KEY     # –¢–æ—á–Ω–∞—è –ø–æ–≥–æ–¥–∞ –¥–ª—è –ö–∞–º—á–∞—Ç–∫–∏
2. ‚úÖ YANDEX_MAPS_API_KEY         # –ö–∞—Ä—Ç—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã
3. ‚≠ê DEEPSEEK_API_KEY           # AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
4. üìß SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏              # Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
5. üì± SMS_RU_API_ID              # SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
6. üí¨ TELEGRAM_BOT_TOKEN         # Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

# –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ
7. üí≥ CLOUDPAYMENTS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏    # –û–Ω–ª–∞–π–Ω-–ø–ª–∞—Ç–µ–∂–∏
8. üìä SENTRY_DSN                 # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫
```

---

## üîÑ –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–ô

–ü–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `.env.production`:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart kamchatour-hub

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs kamchatour-hub --lines 50
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≥–æ–¥—É (Yandex Weather)

```bash
curl "http://localhost:3000/api/weather?lat=53&lng=158"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–≥–æ–¥—ã —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º Yandex.

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
curl "http://localhost:3000/api/health"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```
http://–≤–∞—à_IP_–∞–¥—Ä–µ—Å
```

---

## üö® –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò

### 1. –ü–æ–≥–æ–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –Ω–µ —Ç–æ—á–Ω–∞—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã –ø—É—Å—Ç–æ–π –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–æ–±–∞–≤–∏—Ç—å YANDEX_WEATHER_API_KEY –≤ .env.production
nano /var/www/kamchatour/.env.production

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É:
YANDEX_WEATHER_API_KEY=–≤–∞—à_–∫–ª—é—á

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
pm2 restart kamchatour-hub

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs kamchatour-hub | grep -i weather
```

**Fallback:** –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Open-Meteo (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –Ω–æ –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–π –¥–ª—è –ö–∞–º—á–∞—Ç–∫–∏).

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `Error: Connection refused`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
sudo systemctl status postgresql

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω
sudo systemctl start postgresql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DATABASE_URL
cat /var/www/kamchatour/.env.production | grep DATABASE_URL
```

### 3. PM2 –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `pm2 status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "errored"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
pm2 logs kamchatour-hub --err

# –û–±—ã—á–Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç:
cd /var/www/kamchatour
npm run build
pm2 restart kamchatour-hub
```

### 4. Nginx 502 Bad Gateway

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 502

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ PM2 –∑–∞–ø—É—â–µ–Ω
pm2 status

# –ï—Å–ª–∏ "stopped" - –∑–∞–ø—É—Å—Ç–∏—Ç—å:
pm2 start kamchatour-hub

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx
tail -f /var/log/nginx/kamchatour_error.log
```

---

## üìÑ –ü–û–õ–ù–´–ô –ü–†–ò–ú–ï–† .env.production

```bash
# ============================================
# KAMCHATOUR HUB - Production Configuration
# Timeweb Cloud VDS
# ============================================

# DATABASE (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
DATABASE_URL=postgresql://kamuser:PASSWORD@localhost:5432/kamchatour
DATABASE_SSL=false
DATABASE_MAX_CONNECTIONS=20

# SECURITY (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
JWT_SECRET=–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_EXPIRES_IN=30d

# APPLICATION (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
NODE_ENV=production
NEXT_PUBLIC_APP_URL=http://45.8.96.120
PORT=3000

# ============================================
# –î–û–ë–ê–í–¨–¢–ï –í–†–£–ß–ù–£–Æ:
# ============================================

# –ü–û–ì–û–î–ê –ò –ö–ê–†–¢–´ (–ö–†–ò–¢–ò–ß–ù–û!)
YANDEX_MAPS_API_KEY=–≤–∞—à_–∫–ª—é—á_–∫–∞—Ä—Ç
YANDEX_WEATHER_API_KEY=–≤–∞—à_–∫–ª—é—á_–ø–æ–≥–æ–¥—ã  # ‚Üê –í–ê–ñ–ù–û –¥–ª—è —Ç–æ—á–Ω–æ–π –ø–æ–≥–æ–¥—ã –ö–∞–º—á–∞—Ç–∫–∏!

# AI (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
DEEPSEEK_API_KEY=sk-–≤–∞—à_–∫–ª—é—á

# EMAIL (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
SMTP_HOST=smtp.timeweb.ru
SMTP_PORT=587
SMTP_USER=noreply@–≤–∞—à-–¥–æ–º–µ–Ω.ru
SMTP_PASS=–≤–∞—à_–ø–∞—Ä–æ–ª—å
EMAIL_FROM=noreply@kamchatour.ru

# SMS (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
SMS_RU_API_ID=–≤–∞—à_api_–∫–ª—é—á

# TELEGRAM (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
TELEGRAM_CHAT_ID=–≤–∞—à_chat_id

# –ü–õ–ê–¢–ï–ñ–ò (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
CLOUDPAYMENTS_PUBLIC_ID=–≤–∞—à_public_id
CLOUDPAYMENTS_API_SECRET=–≤–∞—à_secret

# –ú–û–ù–ò–¢–û–†–ò–ù–ì (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
SENTRY_DSN=–≤–∞—à_sentry_dsn
```

---

## üìû –ü–û–ú–û–©–¨

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π)
cat /var/www/kamchatour/.env.production | grep -v PASSWORD | grep -v SECRET | grep -v KEY

# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 status

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs kamchatour-hub
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- `/WEATHER_PROVIDERS_KAMCHATKA.md` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø–æ–≥–æ–¥—ã
- `/WEATHER_API_UPDATE.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Weather API
- `/READY_TO_DEPLOY.md` - –û–±—â–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
- `/TIMEWEB_–î–ï–ü–õ–û–ô.md` - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ Timeweb

---

## üí° –°–û–í–ï–¢–´

1. **Yandex Weather - –ø–µ—Ä–≤–æ–µ —á—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å!**  
   –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ö–∞–º—á–∞—Ç–∫–∏.

2. **DeepSeek API - –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä AI**  
   –î–æ–±–∞–≤—å—Ç–µ Minimax/x.ai –∫–∞–∫ fallback –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏.

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Timeweb SMTP**  
   –ü—Ä–æ—â–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏**  
   `pm2 logs` –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã.

5. **–î–µ–ª–∞–π—Ç–µ backup**  
   –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤–∞–∂–Ω–∞!

---

**–î–∞—Ç–∞:** 2025-11-12  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Timeweb Cloud VDS  
**–°—Ç–∞—Ç—É—Å:** Yandex Weather - –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä üå¶Ô∏è
