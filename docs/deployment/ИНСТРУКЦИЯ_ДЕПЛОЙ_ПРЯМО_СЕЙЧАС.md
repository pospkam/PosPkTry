# КАК РАЗВЕРНУТЬ KAMHUB НА TIMEWEB ПРЯМО СЕЙЧАС

## Вариант 1: Через панель Timeweb Cloud (самый простой)

### Шаг 1: Подключитесь к серверу через веб-терминал

1. Откройте https://timeweb.cloud/my/servers/5898003
2. Нажмите "Консоль" (Web Terminal)
3. Авторизуйтесь как root

### Шаг 2: Загрузите проект

```bash
cd /root
git clone https://github.com/PosPk/kamhub.git
cd kamhub
```

### Шаг 3: Запустите деплой

```bash
bash DEPLOY_TO_TIMEWEB_NOW.sh
```

Готово! Скрипт сделает всё автоматически за 5-10 минут.

---

## Вариант 2: Через SSH с вашего компьютера

### Шаг 1: Подключитесь к серверу

```bash
ssh root@5.129.248.224
```

### Шаг 2: Загрузите проект

```bash
cd /root
git clone https://github.com/PosPk/kamhub.git
cd kamhub
```

### Шаг 3: Запустите деплой

```bash
bash DEPLOY_TO_TIMEWEB_NOW.sh
```

---

## Вариант 3: Загрузка файлов через SCP (если нет git)

С вашего компьютера:

```bash
# Создайте архив проекта
cd /path/to/kamhub
tar -czf kamhub.tar.gz --exclude=node_modules --exclude=.git --exclude=.next .

# Загрузите на сервер
scp kamhub.tar.gz root@5.129.248.224:/root/

# Подключитесь к серверу
ssh root@5.129.248.224

# Распакуйте и запустите
cd /root
mkdir kamhub
tar -xzf kamhub.tar.gz -C kamhub
cd kamhub
bash DEPLOY_TO_TIMEWEB_NOW.sh
```

---

## После успешного деплоя

### 1. Настройте DNS

В панели Timeweb Cloud (https://timeweb.cloud/my/domains):

1. Домены → Добавить запись
2. Тип: A
3. Имя: @
4. Значение: 5.129.248.224
5. TTL: 3600

Повторите для www:
- Имя: www
- Значение: 5.129.248.224

### 2. Установите SSL

На сервере:

```bash
certbot --nginx -d tourhab.ru -d www.tourhab.ru --agree-tos --non-interactive -m admin@tourhab.ru
```

### 3. Добавьте API ключи

```bash
nano /var/www/kamhub/.env
```

Добавьте ваши ключи:

```env
DEEPSEEK_API_KEY=sk-...
DEEPSEEK_API_KEY=sk-...
YANDEX_MAPS_API_KEY=...
YANDEX_WEATHER_API_KEY=...
CLOUDPAYMENTS_PUBLIC_ID=...
CLOUDPAYMENTS_API_SECRET=...
```

Сохраните (Ctrl+O, Enter, Ctrl+X) и перезапустите:

```bash
pm2 restart kamhub
```

### 4. Проверьте работу

```bash
# Статус
pm2 status

# Логи
pm2 logs kamhub --lines 50

# Проверка API
curl http://localhost:3000/api/health

# Проверка сайта
curl -I https://tourhab.ru
```

---

## Если что-то пошло не так

### Проблема: "Ошибка подключения к базе данных"

```bash
sudo systemctl status postgresql
sudo systemctl start postgresql
```

### Проблема: "PM2 не запускается"

```bash
pm2 kill
pm2 start ecosystem.config.js
pm2 save
```

### Проблема: "Nginx ошибка"

```bash
sudo nginx -t
sudo systemctl restart nginx
```

### Полная переустановка

```bash
cd /var/www
sudo rm -rf kamhub
cd /root/kamhub
bash deploy-timeweb-full.sh
```

---

## Полезные команды

```bash
# Обновление из git
kamhub-update

# Ручной backup
kamhub-backup

# Перезапуск приложения
pm2 restart kamhub

# Просмотр логов
pm2 logs kamhub

# Статус всех сервисов
pm2 status
sudo systemctl status nginx
sudo systemctl status postgresql
```

---

## Поддержка

Если возникли проблемы:

1. Проверьте логи: `pm2 logs kamhub`
2. Проверьте статус: `pm2 status`
3. Обратитесь в поддержку Timeweb: https://timeweb.cloud/my/tickets

---

**Время развертывания:** 5-10 минут  
**Требуется:** Доступ root к серверу  
**Результат:** Полностью рабочее приложение на https://tourhab.ru
