# üõ†Ô∏è –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –û–®–ò–ë–û–ö –ò –°–õ–ê–ë–´–• –ú–ï–°–¢

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–º—É –≤–Ω–µ–¥—Ä–µ–Ω–∏—é  
**–î–∞—Ç–∞:** 28 —è–Ω–≤–∞—Ä—è 2026  
**–ê–≤—Ç–æ—Ä:** AI Code Review

---

## üìä –ü–†–ò–û–†–ò–¢–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –°–ü–ò–°–û–ö –í–°–ï–• ISSUES

### –ë–õ–û–ö–ò–†–£–Æ–©–ò–ï –î–õ–Ø PRODUCTION üî¥ (–ö–†–ò–¢–ò–ß–ù–û)

| # | Issue | –§–∞–π–ª | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è | –í–ª–∏—è–Ω–∏–µ |
|---|-------|------|-----------|-------|--------|
| 1 | SQL Injection –≤ –ø–æ–∏—Å–∫–µ | `pillars/discovery-pillar/services/search.ts` | üî¥ –í–´–°–û–ö–ê–Ø | 1—á | –ö–†–ò–¢–ò–ß–ù–û–ï |
| 2 | Race condition –≤ –ø–ª–∞—Ç–µ–∂–∞—Ö | `pillars/booking-pillar/services/payment.ts` | üî¥ –í–´–°–û–ö–ê–Ø | 2—á | –ö–†–ò–¢–ò–ß–ù–û–ï |
| 3 | XSS –≤ –æ—Ç–∑—ã–≤–∞—Ö | `pillars/engagement-pillar/services/review.ts` | üü† –°–†–ï–î–ù–Ø–Ø | 30–º | –í–´–°–û–ö–û–ï |
| 4 | JWT –±–µ–∑ expiration | `lib/auth/jwt.ts` | üü¢ –ù–ò–ó–ö–ê–Ø | 30–º | –í–´–°–û–ö–û–ï |
| 5 | Rate limiting –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | `middleware/rate-limit.ts` | üü† –°–†–ï–î–ù–Ø–Ø | 1—á | –í–´–°–û–ö–û–ï |

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 5 —á–∞—Å–æ–≤  
**–ù–∞—á–∞–ª–æ:** –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ  
**Deadline:** –ü–µ—Ä–µ–¥ production launch

---

### –í–ê–ñ–ù–´–ï –î–õ–Ø PRODUCTION üü† (–í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢)

| # | Issue | –§–∞–π–ª | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è |
|---|-------|------|-----------|-------|
| 6 | Email –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–ª–∞–±–∞—è | `pillars/user-pillar/auth.ts` | üü¢ –ù–ò–ó–ö–ê–Ø | 30–º |
| 7 | –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç brute-force | `middleware/auth.ts` | üü† –°–†–ï–î–ù–Ø–Ø | 1—á |
| 8 | CORS –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –≤—Å–µ—Ö | `middleware/cors.ts` | üü¢ –ù–ò–ó–ö–ê–Ø | 15–º |
| 9 | –ù–µ—Ç audit logging | `lib/audit/logger.ts` | üü† –°–†–ï–î–ù–Ø–Ø | 2—á |
| 10 | N+1 Query –≤ Discovery | `pillars/discovery-pillar/services/tour.ts` | üî¥ –í–´–°–û–ö–ê–Ø | 3—á |
| 11 | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∏–Ω–¥–µ–∫—Å—ã –ë–î | `db/migrations/` | üü† –°–†–ï–î–ù–Ø–Ø | 2—á |

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 9.5 —á–∞—Å–æ–≤  
**Deadline:** –ü–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

---

### –£–õ–£–ß–®–ï–ù–ò–Ø –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø üü° (–°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢)

| # | Issue | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è | ROI |
|---|-------|-----------|-------|-----|
| 12 | Message Queue –¥–ª—è email | üî¥ –í–´–°–û–ö–ê–Ø | 4—á | –í–´–°–û–ö–ò–ô |
| 13 | Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ | üî¥ –í–´–°–û–ö–ê–Ø | 4—á | –í–´–°–û–ö–ò–ô |
| 14 | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–∏—à–ª–∏—Å—Ç–∞ | üü† –°–†–ï–î–ù–Ø–Ø | 3—á | –°–†–ï–î–ù–ò–ô |
| 15 | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –¥–∞—Ç | üü† –°–†–ï–î–ù–Ø–Ø | 2—á | –°–†–ï–î–ù–ò–ô |
| 16 | –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API | üü¢ –ù–ò–ó–ö–ê–Ø | 3—á | –í–´–°–û–ö–ò–ô |

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 16 —á–∞—Å–æ–≤  
**Deadline:** –ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü

---

## üîß –î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### ISSUE #1: SQL Injection –≤ –ø–æ–∏—Å–∫–µ üî¥

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (–ü–õ–û–•–û):**
```typescript
// pillars/discovery-pillar/services/search.ts
async searchTours(filters: any) {
  const region = filters.region
  const query = `
    SELECT * FROM tours 
    WHERE region = '${region}'  // ‚ùå –£–Ø–ó–í–ò–ú–û!
  `
  return db.query(query)
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ (–•–û–†–û–®–û):**
```typescript
// pillars/discovery-pillar/services/search.ts
async searchTours(filters: SearchFilters) {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è input
  const schema = z.object({
    region: z.string().max(50).optional(),
    minPrice: z.number().positive().optional(),
    maxPrice: z.number().positive().optional(),
    rating: z.number().min(0).max(5).optional(),
  })
  
  const validFilters = schema.parse(filters) // Throws if invalid

  // –ò—Å–ø–æ–ª—å–∑—É–µ–º parameterized query
  const query = db
    .selectFrom('tours')
    .where('region', '=', validFilters.region)
    .where('price', '>=', validFilters.minPrice || 0)
    .where('price', '<=', validFilters.maxPrice || Infinity)
    .where('rating', '>=', validFilters.rating || 0)
  
  return query.execute()
}
```

**–ß–µ–∫–ª–∏—Å—Ç:**
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ raw SQL –Ω–∞ parameterized queries
- [ ] –î–æ–±–∞–≤–∏—Ç—å Zod –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö inputs
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ code review
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å injection payload
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

### ISSUE #2: Race condition –≤ –ø–ª–∞—Ç–µ–∂–∞—Ö üî¥

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ó–∞–ø—Ä–æ—Å 1: POST /api/booking/payment ‚Üí CloudPayments API
–ó–∞–ø—Ä–æ—Å 2: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å (timeout) ‚Üí CloudPayments API

–†–µ–∑—É–ª—å—Ç–∞—Ç: –î–≤–æ–π–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –¥–µ–Ω–µ–≥!
```

**–†–µ—à–µ–Ω–∏–µ:**

```typescript
// pillars/booking-pillar/services/payment.ts

import { v4 as uuid } from 'uuid'

async processPayment(bookingId: string, paymentDetails: PaymentDetails) {
  // 1. –°–æ–∑–¥–∞—Ç—å UNIQUE idempotency key
  const idempotencyKey = `booking-${bookingId}-${Date.now()}-${uuid()}`
  
  // 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å–ª–∏ —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏
  const existingPayment = await db
    .selectFrom('payments')
    .where('idempotency_key', '=', idempotencyKey)
    .selectAll()
    .executeTakeFirst()
  
  if (existingPayment) {
    return existingPayment // –í–µ—Ä–Ω—É—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  }

  // 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å database transaction —Å SERIALIZABLE isolation
  const payment = await db.transaction().execute(async (trx) => {
    // –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å booking –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    const booking = await trx
      .selectFrom('bookings')
      .where('id', '=', bookingId)
      .forUpdate() // ‚Üê –í–ê–ñ–ù–û! –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å
      .selectAll()
      .executeTakeFirstOrThrow()
    
    if (booking.status !== 'pending') {
      throw new Error('Booking already processed')
    }
    
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ CloudPayments —Å retries
    const payment = await retryCloudPayments({
      amount: booking.total_price,
      currency: 'RUB',
      orderId: bookingId,
      idempotencyKey, // ‚Üê –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –∏—Ö —Å—Ç–æ—Ä–æ–Ω–µ —Ç–æ–∂–µ
      cardNumber: paymentDetails.cardNumber,
      cvv: paymentDetails.cvv
    })
    
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂ –≤ –ë–î
    await trx.insertInto('payments').values({
      id: uuid(),
      booking_id: bookingId,
      idempotency_key: idempotencyKey,
      status: payment.status,
      amount: payment.amount,
      transaction_id: payment.id,
      created_at: new Date()
    }).execute()
    
    // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å booking
    if (payment.status === 'success') {
      await trx.updateTable('bookings')
        .set({ status: 'confirmed', paid_at: new Date() })
        .where('id', '=', bookingId)
        .execute()
    }
    
    return payment
  })
  
  return payment
}

async function retryCloudPayments(params: any, maxRetries = 3) {
  let lastError: Error
  
  for (let attempt = 0; attempt < maxRetries; attempt++) {
    try {
      return await cloudPaymentsAPI.processPayment(params)
    } catch (error) {
      lastError = error as Error
      console.warn(`Payment retry ${attempt + 1}/${maxRetries}:`, error)
      
      if (attempt < maxRetries - 1) {
        // Exponential backoff: 100ms, 300ms, 900ms
        await sleep(100 * Math.pow(3, attempt))
      }
    }
  }
  
  throw lastError
}

function sleep(ms: number) {
  return new Promise(resolve => setTimeout(resolve, ms))
}
```

**–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î:**
```sql
-- –î–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è idempotency
ALTER TABLE payments ADD COLUMN idempotency_key VARCHAR(255) UNIQUE;
CREATE INDEX idx_payments_idempotency ON payments(idempotency_key);

-- –î–æ–±–∞–≤–∏—Ç—å ENUM –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤
ALTER TABLE bookings 
  MODIFY COLUMN status ENUM('pending', 'confirmed', 'cancelled', 'completed');
```

---

### ISSUE #3: XSS –≤ –æ—Ç–∑—ã–≤–∞—Ö üî¥

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// pillars/engagement-pillar/services/review.ts
import DOMPurify from 'isomorphic-dompurify'

async createReview(reviewData: CreateReviewInput) {
  const schema = z.object({
    tourId: z.string().uuid(),
    bookingId: z.string().uuid(),
    rating: z.number().int().min(1).max(5),
    title: z.string().max(200),
    text: z.string().max(5000),
    photos: z.array(z.string().url()).max(5)
  })
  
  const validated = schema.parse(reviewData)
  
  // –°–∞–Ω–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å HTML
  const sanitized = {
    ...validated,
    title: DOMPurify.sanitize(validated.title, { 
      ALLOWED_TAGS: [], // –ù–∏–∫–∞–∫–∏—Ö —Ç–µ–≥–æ–≤ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
      ALLOWED_ATTR: [] 
    }),
    text: DOMPurify.sanitize(validated.text, { 
      ALLOWED_TAGS: ['b', 'i', 'em', 'strong', 'br', 'p'],
      ALLOWED_ATTR: []
    })
  }
  
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
  const review = await db.insertInto('reviews').values({
    id: uuid(),
    tour_id: validated.tourId,
    booking_id: validated.bookingId,
    user_id: this.userId,
    rating: validated.rating,
    title: sanitized.title,
    text: sanitized.text,
    status: 'pending_moderation',
    created_at: new Date()
  }).execute()
  
  return review
}
```

**package.json:**
```json
{
  "dependencies": {
    "isomorphic-dompurify": "^1.11.0"
  }
}
```

---

### ISSUE #4: JWT –±–µ–∑ expiration üî¥

```typescript
// lib/auth/jwt.ts

const JWT_SECRET = process.env.JWT_SECRET
const JWT_EXPIRY = '1h'           // Access token
const REFRESH_TOKEN_EXPIRY = '7d' // Refresh token

function signAccessToken(user: User) {
  return jwt.sign(
    { 
      sub: user.id,
      email: user.email,
      role: user.role 
    },
    JWT_SECRET,
    { 
      expiresIn: JWT_EXPIRY,  // ‚Üê –í–ê–ñ–ù–û!
      algorithm: 'HS256'
    }
  )
}

function signRefreshToken(user: User) {
  return jwt.sign(
    { 
      sub: user.id,
      type: 'refresh'
    },
    JWT_SECRET,
    { 
      expiresIn: REFRESH_TOKEN_EXPIRY,
      algorithm: 'HS256'
    }
  )
}

function verifyToken(token: string) {
  try {
    return jwt.verify(token, JWT_SECRET)
  } catch (error) {
    if (error instanceof jwt.TokenExpiredError) {
      throw new Error('Token expired. Please refresh.')
    }
    throw new Error('Invalid token')
  }
}
```

---

### ISSUE #5: Rate limiting –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç üî¥

```typescript
// middleware/rate-limit.ts

import RedisStore from 'rate-limit-redis'
import rateLimit from 'express-rate-limit'
import redis from 'redis'

const redisClient = redis.createClient({
  host: process.env.REDIS_HOST,
  port: process.env.REDIS_PORT,
  password: process.env.REDIS_PASSWORD
})

// Global rate limit: 100 requests per 15 minutes per user
const globalLimiter = rateLimit({
  store: new RedisStore({
    client: redisClient,
    prefix: 'rate-limit:'
  }),
  keyGenerator: (req) => req.user?.id || req.ip, // –ö–ª—é—á –ø–æ user ID –∏–ª–∏ IP
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100,
  message: 'Too many requests, please try again later.',
  standardHeaders: true,
  legacyHeaders: false
})

// Strict rate limit –Ω–∞ sensitive endpoints
const authLimiter = rateLimit({
  store: new RedisStore({
    client: redisClient,
    prefix: 'auth-limit:'
  }),
  keyGenerator: (req) => req.body?.email || req.ip,
  windowMs: 15 * 60 * 1000,
  max: 5, // —Ç–æ–ª—å–∫–æ 5 –ø–æ–ø—ã—Ç–æ–∫
  skipSuccessfulRequests: true, // –Ω–µ —Å—á–∏—Ç–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ
  message: 'Too many login attempts. Try again after 15 minutes.'
})

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
export { globalLimiter, authLimiter }

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main app
app.use('/api/', globalLimiter)
app.post('/api/auth/login', authLimiter, loginHandler)
app.post('/api/auth/register', authLimiter, registerHandler)
```

---

## üéØ TIMELINE –î–õ–Ø –í–ù–ï–î–†–ï–ù–ò–Ø

### –î–µ–Ω—å 1 (4 —á–∞—Å–∞)
- [ ] 10:00-11:00 - Issue #1: SQL Injection
- [ ] 11:00-13:00 - Issue #2: Payment race condition
- [ ] 13:00-14:00 - Issue #3: XSS
- [ ] 14:00-15:00 - Issue #4 & #5: JWT + Rate limit

### –î–µ–Ω—å 2 (3-4 —á–∞—Å–∞) 
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- [ ] Code review –∏ merge –≤ main
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –î–µ–Ω—å 3-7 (High Priority issues)
- [ ] Email –≤–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] Brute-force –∑–∞—â–∏—Ç–∞
- [ ] CORS –∫–æ–Ω—Ñ–∏–≥
- [ ] Audit logging
- [ ] N+1 Query fix
- [ ] DB –∏–Ω–¥–µ–∫—Å—ã

---

## üìù FINAL RECOMMENDATIONS

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å –î–û PRODUCTION

1. **Security:**
   - –ü—Ä–æ–π—Ç–∏ OWASP Top 10 audit
   - –î–æ–±–∞–≤–∏—Ç—å WAF (Web Application Firewall)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Security Headers (CSP, X-Frame-Options)
   - –í–∫–ª—é—á–∏—Ç—å HTTPS/TLS –≤–µ–∑–¥–µ
   - –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

2. **Performance:**
   - –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ DB –∏–Ω–¥–µ–∫—Å—ã
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å N+1 queries
   - –í–∫–ª—é—á–∏—Ç—å gzip compression
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

3. **Reliability:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å health checks
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful shutdown
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
   - –°–æ–∑–¥–∞—Ç—å backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

4. **Documentation:**
   - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger/OpenAPI)
   - –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - Runbook –¥–ª—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤
   - –ü—Ä–æ—Ü–µ—Å—Å—ã escalation

### üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```yaml
# –ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–æ—Å–ª–µ launch
Performance:
  - API response time (p95, p99)
  - Database query latency
  - Cache hit ratio
  
Errors:
  - 5xx errors rate
  - Failed payments
  - Database connection errors
  
Business:
  - Booking conversion rate
  - Payment success rate
  - User retention
  
Security:
  - Failed login attempts
  - API errors by endpoint
  - Unusual traffic patterns
```

---

## üöÄ DEPLOYMENT CHECKLIST

–ü–µ—Ä–µ–¥ production deployment:

```
üîí Security
- [ ] –í—Å–µ SQL queries parameterized
- [ ] XSS protection –≤–µ–∑–¥–µ
- [ ] CSRF protection
- [ ] Rate limiting –≤–∫–ª—é—á–µ–Ω
- [ ] JWT expiration –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Audit logging —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] HTTPS —Ç–æ–ª—å–∫–æ
- [ ] Security headers –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

‚ö° Performance
- [ ] DB –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
- [ ] N+1 queries –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [ ] Assets optimized (gzip, minify)
- [ ] CDN –Ω–∞—Å—Ç—Ä–æ–µ–Ω

üõ°Ô∏è Reliability
- [ ] Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- [ ] Health checks
- [ ] Logging –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Alerting –≤–∫–ª—é—á–µ–Ω
- [ ] Disaster recovery plan

üìä Monitoring
- [ ] Prometheus metrics
- [ ] Grafana dashboards
- [ ] Error tracking (Sentry)
- [ ] Log aggregation (ELK)
- [ ] APM tool (DataDog, NewRelic)
```

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 28 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é
