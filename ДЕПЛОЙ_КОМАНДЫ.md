# üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –î–ï–ü–õ–û–Ø KAMHUB
## –ö–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –ø–æ –ø–æ—Ä—è–¥–∫—É

---

## –ß–ê–°–¢–¨ 1: –û–¢–ü–†–ê–í–ö–ê –ö–û–î–ê –í GITHUB (–Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)

### –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ PowerShell:

```powershell
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd C:\Users\–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.DESKTOP-GDHBNEF\kamhub

# 2. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
git add .

# 3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git commit -m "Production ready: AI assistants + deploy scripts"

# 4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ GitHub
git push origin main
```

**‚è±Ô∏è –í—Ä–µ–º—è:** 2 –º–∏–Ω—É—Ç—ã

---

## –ß–ê–°–¢–¨ 2: –î–ï–ü–õ–û–ô –ù–ê –°–ï–†–í–ï–† TIMEWEB

### –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–Å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑:

```bash
ssh root@5.129.248.224 << 'ENDSSH'

# ===== –ù–ê–ß–ê–õ–û –°–ö–†–ò–ü–¢–ê –î–ï–ü–õ–û–Ø =====

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π KamHub..."

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ü–û
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û..."
curl -fsSL https://deb.nodesource.com/setup_18.x | bash - 2>/dev/null
apt update -y 2>/dev/null
apt install -y nodejs postgresql postgresql-contrib postgis nginx 2>/dev/null
npm install -g pm2 2>/dev/null

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
echo "üóÑÔ∏è  –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î..."
sudo -u postgres psql << 'ENDPSQL'
CREATE DATABASE kamhub_production;
CREATE USER kamhub_user WITH ENCRYPTED PASSWORD 'KamHub2025!SecurePassword';
GRANT ALL PRIVILEGES ON DATABASE kamhub_production TO kamhub_user;
\c kamhub_production
CREATE EXTENSION IF NOT EXISTS postgis;
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
ENDPSQL

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
echo "üì• –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞..."
cd /var/www
rm -rf kamhub
git clone https://github.com/PosPk/kamhub.git
cd kamhub

# –°–æ–∑–¥–∞–Ω–∏–µ .env.production
echo "‚öôÔ∏è  –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."
cat > .env.production << 'ENDENV'
DATABASE_URL=postgresql://kamhub_user:KamHub2025!SecurePassword@localhost:5432/kamhub_production
DATABASE_SSL=false
NODE_ENV=production
PORT=3000
JWT_SECRET=KamHub_Super_Secret_Key_2025_Production_XYZ123
JWT_EXPIRES_IN=7d
S3_ENDPOINT=https://s3.twcstorage.ru
S3_BUCKET=d9542536-676ee691-7f59-46bb-bf0e-ab64230eec50
S3_ACCESS_KEY=F2CP4X3X17GVQ1YH5I5D
S3_SECRET_KEY=72iAsYR4QQCIdaDI9e9AzXnzVvvP8bvPELmrBVzX
TIMEWEB_API_TOKEN=eyJhbGciOiJSUzUxMiIsInR5cCI6IkpXVCIsImtpZCI6IjFrYnhacFJNQGJSI0tSbE1xS1lqIn0.eyJ1c2VyIjoicGE0MjIxMDgiLCJ0eXBlIjoiYXBpX2tleSIsImFwaV9rZXlfaWQiOiI0MmZmZTY1MC02OWI4LTRmZmQtYTFkOC02OWRkMjMwM2QyY2MiLCJpYXQiOjE3NjE3ODUzNDl9.SFHpwgy9kr-EH2CwN6K1REkOl7KCpiUnMk5ivTRljEaWl8iE-B-BMjaJxaFhpdB2dqcb33ky2oyfwxkU1Sszrbo-8UINnFO5SothY4P6WC8kSSHxFlLI2i0xGCa3YzgyYZ1Wgn2a0jf__ZcyZi7ZsaJkuold9NAeeGCCrAUbdVsr39-fLDL_EKh0iekq_tuO59f_BCmg7Poe7xKlmNYzu2hy3GnfNp3ueKW52H6kFkGwibixS3tWKCHkPpyTAjRztWKCnDZOOG6xDk4sSiPPMlZOEfFzzkpKkizQ9CykBC06SXwmT2uPRR2NyZJIY-PZd4AVZ34H1jXQ-NGquRPi_aYiywt3LtOVDRarpVErBdk6I0qO0Yf33zICvMN-yFpXuY_oSlE8v3C-02XHnYLsMXcHTsUB4ISkJrhglBkv-hTzuiQxwAEZp0eHOEq8YNz6qOLU3RcaNgg0DWGXMDrMzObYx2NknrZUCMbRFftIU-C1Ilo8Ayy98MwI3J77X62p
ENDENV

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL —Å—Ö–µ–º
echo "üìä –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL —Å—Ö–µ–º..."
export PGPASSWORD='KamHub2025!SecurePassword'

psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/accommodation_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/transfer_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/transfer_payments_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/seat_holds_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/operators_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/loyalty_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/agent_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/admin_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/transfer_operator_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/souvenirs_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/gear_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/cars_schema.sql 2>/dev/null
psql -h localhost -U kamhub_user -d kamhub_production -f lib/database/migrations/001_update_roles.sql 2>/dev/null

echo "‚úÖ SQL —Å—Ö–µ–º—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
echo "üë• –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..."
psql -h localhost -U kamhub_user -d kamhub_production << 'ENDUSERS'
INSERT INTO users (id, email, name, role, created_at) VALUES
(gen_random_uuid(), 'tourist@kamhub.ru', '–î–µ–º–æ –¢—É—Ä–∏—Å—Ç', 'tourist', NOW()),
(gen_random_uuid(), 'operator@kamhub.ru', '–î–µ–º–æ –û–ø–µ—Ä–∞—Ç–æ—Ä', 'operator', NOW()),
(gen_random_uuid(), 'agent@kamhub.ru', '–î–µ–º–æ –ê–≥–µ–Ω—Ç', 'agent', NOW()),
(gen_random_uuid(), 'guide@kamhub.ru', '–î–µ–º–æ –ì–∏–¥', 'guide', NOW()),
(gen_random_uuid(), 'transfer@kamhub.ru', '–î–µ–º–æ –¢—Ä–∞–Ω—Å—Ñ–µ—Ä', 'transfer', NOW()),
(gen_random_uuid(), 'admin@kamhub.ru', '–î–µ–º–æ –ê–¥–º–∏–Ω', 'admin', NOW())
ON CONFLICT DO NOTHING;
ENDUSERS

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–±–æ—Ä–∫–∞
echo "üî® –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
npm install 2>/dev/null
npm run build 2>/dev/null

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2
echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
pm2 delete kamhub 2>/dev/null || true
pm2 start npm --name kamhub -- start
pm2 save

# –ü—Ä–æ–≤–µ—Ä–∫–∞
sleep 5
echo ""
echo "‚úÖ –î–ï–ü–õ–û–ô –ó–ê–í–ï–†–®–Å–ù!"
echo ""
pm2 status

# ===== –ö–û–ù–ï–¶ –°–ö–†–ò–ü–¢–ê –î–ï–ü–õ–û–Ø =====

ENDSSH
```

**‚è±Ô∏è –í—Ä–µ–º—è:** 10-15 –º–∏–Ω—É—Ç

---

## –ß–ê–°–¢–¨ 3: –ü–†–û–í–ï–†–ö–ê

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
http://5.129.248.224:3000

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ curl:
curl http://5.129.248.224:3000/api/health
```

**–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:** `{"success":true,"status":"ok"}`

---

## üéâ –ì–û–¢–û–í–û!

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞:
- **IP:** http://5.129.248.224:3000
- **–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ
- **AI –ü–æ–º–æ—â–Ω–∏–∫–∏:** 6 —Ä–æ–ª–µ–π ‚úÖ
- **–ë–î:** 58+ —Ç–∞–±–ª–∏—Ü ‚úÖ

---

## üìù –ß–¢–û –î–ê–õ–¨–®–ï:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω (–ø—Ä–∏–≤—è–∑–∞—Ç—å kamhub.ru –∫ IP)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
3. –î–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á–∏ (CloudPayments, GROQ, etc.)
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

**–ì–û–¢–û–í –ó–ê–ü–£–°–ö–ê–¢–¨? –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ!** üöÄ

